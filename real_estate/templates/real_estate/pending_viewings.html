{% extends 'base.html' %}

{% block content %}
<h1>Pending Viewings</h1>

<table>
    <thead>
        <tr>
            <th>Property</th>
            <th>Request By</th>
            <th>Preferred Date</th>
            <th>Preferred Time</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for viewing in viewings %}
        <tr>
            <td>{{ viewing.property.title }}</td>
            <td>{{ viewing.name }}</td>
            <td>{{ viewing.preferred_date }}</td>
            <td>{{ viewing.preferred_time }}</td>
            <td>{{ viewing.viewing_decision }}</td>
            <td>
                <a href="{% url 'update_viewing' viewing.id %}">Update</a> |
                <button class="delete-viewing-btn" data-viewing-id="{{ viewing.id }}" aria-label="Delete viewing">Delete</button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal">
  <div class="modal-content">
    <span class="close" aria-label="Close modal">&times;</span>
    <p>Are you sure you want to delete this viewing request?</p>
    <button id="confirmDelete" class="confirm-btn" aria-label="Confirm delete">Yes, delete it</button>
    <button id="cancelDelete" class="cancel-btn" aria-label="Cancel delete">Cancel</button>
  </div>
</div>

{% endblock %}
