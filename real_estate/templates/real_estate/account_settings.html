{% extends 'base.html' %}

{% block title %}Account Settings{% endblock %}

{% block content %}
<main class="account-settings-container">
  <aside class="account-sidebar">
    <h2 class="account-title">Account Settings</h2>
    <ul class="account-menu">
      <li class="account-menu-item"><a href="#personal-details" class="account-menu-link">Personal Details</a></li>
      <li class="account-menu-item"><a href="#settings" class="account-menu-link">Settings</a></li>
    </ul>
  </aside>
  <section class="account-content">
    <div id="personal-details" class="account-section">
      <h3 class="account-section-title">Personal Details</h3>
      <form method="post" action="{% url 'account_settings' %}" class="account-form">
        {% csrf_token %}
        <div class="account-form-group">
          {{ profile_form.non_field_errors }}
          {{ profile_form.name.errors }}
          <label for="id_name" class="account-form-label">Name:</label>
          {{ profile_form.name }}
        </div>
        <div class="account-form-group">
          {{ profile_form.email.errors }}
          <label for="id_email" class="account-form-label">Email:</label>
          {{ profile_form.email }}
        </div>
        <div class="account-form-group">
          {{ profile_form.address.errors }}
          <label for="id_address" class="account-form-label">Address:</label>
          {{ profile_form.address }}
        </div>
        <div class="account-form-group">
          {{ profile_form.telephone.errors }}
          <label for="id_telephone" class="account-form-label">Telephone:</label>
          {{ profile_form.telephone }}
        </div>
        <button type="submit" name="update_profile" class="account-button">Save Changes</button>
      </form>
    </div>

    <div id="settings" class="account-section">
      <h3 class="account-section-title">Settings</h3>
      <form method="post" action="{% url 'account_settings' %}" class="account-form">
        {% csrf_token %}
        <div class="account-form-group">
          {{ password_form.non_field_errors }}
          {{ password_form.old_password.errors }}
          <label for="id_old_password" class="account-form-label">Old Password:</label>
          {{ password_form.old_password }}
        </div>
        <div class="account-form-group">
          {{ password_form.new_password1.errors }}
          <label for="id_new_password1" class="account-form-label">New Password:</label>
          {{ password_form.new_password1 }}
        </div>
        <div class="account-form-group">
          {{ password_form.new_password2.errors }}
          <label for="id_new_password2" class="account-form-label">Confirm New Password:</label>
          {{ password_form.new_password2 }}
        </div>
        <button type="submit" name="change_password" class="account-button">Change Password</button>
      </form>
    </div>
    
    <div id="delete-account" class="account-section">
      <h3 class="account-section-title">Delete Account</h3>
      <form method="post" action="{% url 'account_settings' %}" class="account-form delete-account-form">
        {% csrf_token %}
        <div class="account-form-group delete-confirmation">
          {{ delete_form.non_field_errors }}
          {{ delete_form.confirm_delete.errors }}
          <label for="id_confirm_delete" class="account-form-label">Confirm Delete:</label>
          {{ delete_form.confirm_delete }}
        </div>
        <button type="submit" name="delete_account" class="account-button delete-account-button">Delete Account</button>
      </form>
    </div>
  </section>
</main>
{% endblock %}
